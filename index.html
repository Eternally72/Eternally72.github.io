<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>云计算平台组件安装配置实验报告</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            color: #333;
            background-color: #f9f9f9;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 5px;
        }
        header {
            text-align: center;
            border-bottom: 2px solid #2c3e50;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 5px;
        }
        .student-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 10px;
        }
        h2 {
            color: #3498db;
            border-left: 4px solid #3498db;
            padding-left: 10px;
            margin-top: 30px;
        }
        h3 {
            color: #2c3e50;
            margin-top: 20px;
        }
        .toc {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 30px;
        }
        .toc ul {
            padding-left: 20px;
        }
        .toc li {
            margin-bottom: 5px;
        }
        .code-block {
            background-color: #f8f8f8;
            border-left: 4px solid #3498db;
            padding: 10px 15px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: Consolas, monospace;
            white-space: pre;
        }
        .image-placeholder {
            background-color: #f0f0f0;
            border: 2px dashed #ccc;
            padding: 40px 20px;
            text-align: center;
            margin: 20px 0;
            color: #666;
            font-style: italic;
        }
        .page-break {
            page-break-after: always;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #7f8c8d;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>云计算平台组件安装配置实验报告</h1>
            <div class="student-info">
                <p><strong>姓名：</strong>白俊</p>
                <p><strong>学号：</strong>23281295</p>
            </div>
        </header>

        <div class="toc">
            <h2>目录</h2>
            <ul>
                <li>一、大数据平台安装
                    <ul>
                        <li>1、Linux虚拟机安装</li>
                        <li>2、Hadoop组件安装</li>
                        <li>3、准备工作</li>
                    </ul>
                </li>
                <li>二、平台配置
                    <ul>
                        <li>1、环境变量配置</li>
                        <li>2、配置文件配置</li>
                    </ul>
                </li>
                <li>三、启动测试</li>
                <li>四、ZooKeeper准备
                    <ul>
                        <li>1、安装Zookeeper</li>
                        <li>2、解压Zookeeper</li>
                    </ul>
                </li>
                <li>五、配置Zookeeper
                    <ul>
                        <li>1、创建临时数据目录zookeeper-data</li>
                        <li>2、配置zoo.cfg</li>
                    </ul>
                </li>
                <li>六、启动测试
                    <ul>
                        <li>1、启动</li>
                        <li>2、验证状态</li>
                    </ul>
                </li>
            </ul>
        </div>

        <h2>一、大数据平台安装</h2>
        
        <h3>1、Linux虚拟机安装</h3>
        
        <h4>1) 发行商</h4>
        <p>虚拟机安装Ubuntu-24.03</p>
                <!-- 图片占位符：虚拟机安装截图 -->
        <div class="image-placeholder">
            <img src="images/1.png" alt="虚拟机安装截图" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <p>安装三台:命名分别为master、slave1、slave2</p>
        <div class="image-placeholder">
            <img src="images/2.png" alt="虚拟机命名截图" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>

        
        <h4>2) 配置说明</h4>
        <p>设置三台虚拟机的ip分别为:</p>
        <ul>
            <li>master: 192.168.226.132</li>
            <li>slave1: 192.168.226.133</li>
            <li>slave2: 192.168.226.134</li>
        </ul>
        
        <!-- 图片占位符：网络配置截图 -->
        <div class="image-placeholder">
            <img src="images/3.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        <div class="image-placeholder">
            <img src="images/4.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        <div class="image-placeholder">
            <img src="images/5.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h4>3) SSH免密配置</h4>
        <p>由于NameNode要能够直接访问到剩下的两个DataNode，就需要设置免密登录</p>
        <ol>
            <li>在master节点上生成SSH密钥对</li>
            <div class="code-block">ssh-keygen -t rsa -P "" -f ~/.ssh/id_rsa</div>
            <li>将公钥配置到所有节点</li>
            <div class="code-block">
ssh-copy-id master
ssh-copy-id slave1
ssh-copy-id slave2
            </div>
        </ol>
        <p>验证连接性</p>
        
        <!-- 图片占位符：SSH免密配置验证截图 -->
        <div class="image-placeholder">
             <img src="images/12.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        <div class="image-placeholder">
             <img src="images/13.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h3>2、Hadoop组件安装</h3>
        
        <h4>1) 组件下载</h4>
        <p>使用阿里云镜像站安装Hadoop-3.3.6版本Hadoop</p>
        
        <h4>2) 组件解压</h4>
        <p>三台虚拟机都需要安装并解压</p>
        <p>将压缩包传到虚拟机，使用共享文件夹将主机文件传递到虚拟机:</p>
        
        <!-- 图片占位符：文件传输截图 -->
        <div class="image-placeholder">
            <img src="images/27.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <p>解压，使用以下命令将压缩包解压:</p>
        <div class="code-block">tar -xzvf hadoop-3.3.6.tar.gz</div>
        <p>转移存储位置，将Hadoop的解压缩文件转移到文件夹/usr/local下，方便管理</p>
        <div class="code-block">sudo mv hadoop-3.3.6 /usr/local/hadoop</div>
        
        <h3>3、准备工作</h3>
        
        <h4>1) JDK安装</h4>
        <p>三台虚拟机都需要安装JDK</p>
        <div class="code-block">
rabbit@master:-$ java --version
openjdk 21.0.8 2025-07-15
OpenJDK Runtime Environment (build 21.0.8+9-Ubuntu-0ubuntu124.04.1)
OpenJDK 64-Bit Server VM (build 21.0.8+9-Ubuntu-0ubuntu124.04.1, mixed mode, sharing)
rabbit@master:~$
        </div>
        
        <!-- 图片占位符：JDK安装验证截图 -->
        <div class="image-placeholder">
            <img src="images/6.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h2>二、平台配置</h2>
        
        <h3>1、环境变量配置</h3>
        <p>在文件~/.bashrc中输入环境变量</p>
        <p>再执行下列语句使配置生效:</p>
        <div class="code-block">source ~/.bashrc</div>
        
        <!-- 图片占位符：环境变量配置截图 -->
        <div class="image-placeholder">
            <img src="images/7.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h3>2、配置文件配置</h3>
        
        <h4>1) 配置core-site.xml</h4>
        <p>执行 sudo vim $HADOOP_HOME/etc/hadoop/core-site.xml</p>
        
        <!-- 图片占位符：core-site.xml配置截图 -->
        <div class="image-placeholder">
            <img src="images/8.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h4>2) 配置hdfs-site.xml</h4>
        <p>执行 sudo vim $HADOOP_HOME/etc/hadoop/hdfs-site.xml</p>
        
        <!-- 图片占位符：hdfs-site.xml配置截图 -->
        <div class="image-placeholder">
            <img src="images/9.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h4>3) 配置yarn-site.xml</h4>
        <p>执行 sudo vim $HADOOP_HOME/etc/hadoop/yarn-site.xml</p>
        
        <!-- 图片占位符：yarn-site.xml配置截图 -->
        <div class="image-placeholder">
            <img src="images/10.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h4>4) 配置mapred-site.xml</h4>
        <p>执行 sudo vim $HADOOP_HOME/etc/hadoop/mapred-site.xml</p>
        
        <!-- 图片占位符：mapred-site.xml配置截图 -->
        <div class="image-placeholder">
            <img src="images/11.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h4>5) 配置slave文件</h4>
        <p>列出所有的DataNode节点:</p>
        <div class="code-block">
slave1
slave2
        </div>
        
        <h4>6) 配置DataNode的Hadoop配置文件</h4>
        <p>使用scp直接将master上的配置文件传输到slave1和slave2上</p>
        <div class="code-block">
scp -r /usr/local/hadoop slave1:/usr/local/
scp -r /usr/local/hadoop slave2:/usr/local/
        </div>
        
        
        <h2>三、启动测试</h2>
        
        <h3>1、格式化HDFS</h3>
        <div class="code-block">hdfs namenode -format</div>
        
        <!-- 图片占位符：HDFS格式化截图 -->
        <div class="image-placeholder">
            <img src="images/14.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h3>2、启动 HDFS 和 YARN</h3>
        <div class="code-block">
start-dfs.sh
start-yarn.sh
        </div>
        
        <!-- 图片占位符：HDFS和YARN启动截图 -->
        <div class="image-placeholder">
            <img src="images/15.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        <div class="image-placeholder">
            <img src="images/16.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h3>3、通过浏览器查看集群状态</h3>
        <p>NameNode UI: http://master:9870</p>
        
        <!-- 图片占位符：NameNode UI截图 -->
        <div class="image-placeholder">
            <img src="images/17.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h2>四、ZooKeeper准备</h2>
        
        <h3>1、安装 Zookeeper</h3>
        <p>在阿里云镜像站安装 Zookeeper</p>
        
        <!-- 图片占位符：Zookeeper下载截图 -->
        <div class="image-placeholder">
            <img src="images/18.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h3>2、解压Zookeeper</h3>
        <p>将压缩包放在共享文件夹下，执行以下指令进行解压</p>
        <div class="code-block">tar -zxvf apache-zookeeper-3.9.4-bin.tar.gz</div>
        
        <!-- 图片占位符：Zookeeper解压截图 -->
        <div class="image-placeholder">
            <img src="images/19.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h2>五、配置Zookeeper</h2>
        
        <h3>1、创建临时数据目录zookeeper-data</h3>
        
        <!-- 图片占位符：创建数据目录截图 -->
        <div class="image-placeholder">
            <img src="images/20.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h3>2、配置 zoo.cfg</h3>
        <div class="code-block">
# The number of milliseconds of each tick
tickTime=2000
# The number of ticks that the initial
# synchronization phase can take
initLimit=10
# The number of ticks that can pass between
# sending a request and getting an acknowledgement
syncLimit=5
# the directory where the snapshot is stored.
# do not use /tmp for storage, /tmp here is just
# example sakes
dataDir=/usr/local/apache-zookeeper-3.9.4-bin/zookeeper-data
server.1=192.168.226.132:2888:3888
server.2=192.168.226.133:2888:3888
server.3=192.168.226.134:2888:3888
# the port at which the clients will connect
clientPort=8888
# the maximum number of client connections.
# increase this if you need to handle more clients
maxClientCnxns=60
## Be sure to read the maintenance section of the
# administrator guide before turning on autopurge.
        </div>
        
        <!-- 图片占位符：zoo.cfg配置截图 -->
        <div class="image-placeholder">
            <img src="images/21.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h2>六、启动测试</h2>
        
        <h3>1、启动</h3>
        <p>启动成功</p>
        
        <!-- 图片占位符：Zookeeper启动截图 -->
        <div class="image-placeholder">
            <img src="images/22.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <h3>2、验证状态</h3>
        <div class="code-block">
rabbit@slave1:/usr/local/apache-zookeeper-3.9.4-bin$ bin/zkServer.sh status
ZooKeeper JMX enabled by default
Using config: /usr/local/apache-zookeeper-3.9.4-bin/bin/../conf/zoo.cfg
Client port found: 8888. Client address: localhost. Client SSL: false.
Mode: leader
rabbit@slave1:/usr/local/apache-zookeeper-3.9.4-bin$

rabbit@master:/usr/local/apache-zookeeper-3.9.4-bin$ bin/zkServer.sh status
ZooKeeper JMX enabled by default
Using config: /usr/local/apache-zookeeper-3.9.4-bin/bin/../conf/zoo.cfg
Client port found: 8888. Client address: localhost. Client SSL: false.
Mode: follower
rabbit@master:/usr/local/apache-zookeeper-3.9.4-bin$

rabbit@slave2:/usr/local/apache-zookeeper-3.9.4-bin$ bin/zkServer.sh status
ZooKeeper JMX enabled by default
Using config: /usr/local/apache-zookeeper-3.9.4-bin/bin/../conf/zoo.cfg
Client port found: 8888. Client address: localhost. Client SSL: false.
Mode: follower
rabbit@slave2:/usr/local/apache-zookeeper-3.9.4-bin$
        </div>
        
        <!-- 图片占位符：Zookeeper状态验证截图 -->
        <div class="image-placeholder">
            <img src="images/23.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        <div class="image-placeholder">
            <img src="images/24.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        <div class="image-placeholder">
            <img src="images/26.png" alt="ip" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
        </div>
        
        <footer>
            <p>实验报告完成时间：2025年10月21日</p>
        </footer>
    </div>
</body>
</html>
